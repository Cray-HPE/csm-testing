# Copyright 2014-2021 Hewlett Packard Enterprise Development LP
# Variable set: k8s_nodes
command:
  {{range $node := index .Vars "k8s_nodes"}}
  k8s_node_{{$node}}_joined_cluster:
    title: Kubernetes Node '{{$node}}' Valid Age
    meta:
      desc: Validates that Kubernetes node '{{$node}}' has valid age.
      sev: 0
    exec: kubectl get nodes | grep {{$node}} | awk '{ print $4 }' | grep -v '<invalid>'
    exit-status: 0
    timeout: 10000
    skip: false
  {{end}}