# Copyright 2014-2021 Hewlett Packard Enterprise Development LP
# Variable set: network_interfaces
command:
{{range $interface := index .Vars "network_interfaces"}}
  check_interface_ip_{{$interface}}:
    title: Interface '{{$interface}}' Has IP
    meta:
      desc: Validates that interface '{{$interface}}' has an IP address
      sev: 0
    exec: "ip addr show dev {{$interface}} scope global | grep 'inet ' | awk '{print $2}'"
    exit-status: 0
    stdout:
    - /[1-9]/
    timeout: 10000
    skip: false
{{end}}
