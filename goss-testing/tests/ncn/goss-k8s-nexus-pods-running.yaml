# Copyright 2014-2021 Hewlett Packard Enterprise Development LP
command:
  k8s_service_nexus_running:
    title: Kubernetes Service 'nexus' Is Running
    meta:
      desc: Validates that Kubernetes service 'nexus' is running.
      sev: 0
    exec: pods=$(kubectl get pods -n nexus -l app=nexus 2>&1 | awk 'NR>1' | awk '{ print $3 }'); if [ -z $pods ]; then \
      echo FAIL; else for status in $pods; do if [ "$status" != "Running" ]; then echo FAIL; fi; done; fi
    exit-status: 0
    timeout: 10000
    skip: false